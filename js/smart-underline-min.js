(function(){var e,t,n,r,i,o,a,d,l,u,m,c,s,f,g,p,h,b,v,y,k,w,x,S,C,z,A,E,L,M,T,H;(window.SmartUnderline={init:function(){},destroy:function(){}},window.getComputedStyle&&document.documentElement.getAttribute)&&(x="data-smart-underline-link-color",C="data-smart-underline-link-hover",o="data-smart-underline-container-id",z=[],M=function(){return+new Date},S={},H=0,T=function(){return H+=1},i=function(e,t){return t.clearRect(0,0,e.width,e.height)},n=function(e,t,n){var r,o,a,d,l,u,m,c,s,f,g;for(i(t,n),n.fillStyle="red",s=n.measureText(e).width,n.fillText(e,0,0),o=void 0,f=a=0,m=s;0<=m?a<=m:a>=m;f=0<=m?++a:--a)for(g=d=0,c=t.height;0<=c?d<=c:d>=c;g=0<=c?++d:--d)u=(l=n.getImageData(f,g,f+1,g+1)).data[0],r=l.data[3],255===u&&r>50&&(o||(o=g),g>o&&(o=g));return i(t,n),o},r=function(e){var t,r,i;return i=(r=document.createElement("canvas")).getContext("2d"),r.height=r.width=2*parseInt(e.fontSize,10),i.textBaseline="top",i.textAlign="start",i.fontStretch=1,i.angle=0,i.font=e.fontVariant+" "+e.fontStyle+" "+e.fontWeight+" "+e.fontSize+"/"+e.lineHeight+" "+e.fontFamily,{baselineY:t=n("I",r,i),descenderHeight:n("g",r,i)-t}},t=function(e){var t,n,r,i,o,a,d;return(d=document.createElement("div")).style.display="block",d.style.position="absolute",d.style.bottom=0,d.style.right=0,d.style.width=0,d.style.height=0,d.style.margin=0,d.style.padding=0,d.style.visibility="hidden",d.style.overflow="hidden",d.style.wordWrap="normal",d.style.whiteSpace="nowrap",o=document.createElement("span"),r=document.createElement("span"),o.style.display="inline",r.style.display="inline",o.style.fontSize="0px",r.style.fontSize="2000px",o.innerHTML="X",r.innerHTML="X",d.appendChild(o),d.appendChild(r),e.appendChild(d),a=o.getBoundingClientRect(),i=r.getBoundingClientRect(),e.removeChild(d),t=a.top-i.top,n=i.height,Math.abs(t/n)},e={},f=function(e){var t,n,r,i;for(r=0,i=(n=e.split(",")).length;r<i;r++)if(t=n[r],m(t))return t;return!1},m=function(e){var t,n,r;return r="abcdefghijklmnopqrstuvwxyz0123456789",(n=document.createElement("canvas").getContext("2d")).font="72px monospace",t=n.measureText(r).width,n.font="72px "+e+", monospace",n.measureText(r).width!==t},p=function(n){var i,o,a,d,l,u,m,c,s,g,p,h,b,v;return c=getComputedStyle(n),u=(p=f(c.fontFamily))?"font:"+p+"size:"+c.fontSize+"weight:"+c.fontWeight:""+Math.random(),(l=e[u])?l:(d=(b=r(c)).baselineY,s=b.descenderHeight,(null!=(m=n.getClientRects())?m.length:void 0)?(i=1,v=m[0].height-i,-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&(i=.98,d=t(n)*v*i),g=d+s,h=parseInt(c.fontSize,10),3,o=d+Math.max(3,s/1.618034),4===s&&(o=g-1),3===s&&(o=g),a=Math.round(100*o/v),s>2&&h>10&&a<=100?(e[u]=a,a):void 0):void 0)},k=function(e){var t;return"transparent"===e||"rgba(0, 0, 0, 0)"===e||2===(null!=(t=e.match(/^rgba\(.*,(.+)\)/i))?t.length:void 0)&&parseFloat(t[1])<1e-4},s=function(e){var t,n,r,i;return t=(n=getComputedStyle(e)).backgroundColor,i=!(r=e.parentNode)||r===document.documentElement||r===e,"none"!==n.backgroundImage?null:k(t)?i?e.parentNode||e:s(r):e},h=function(e){return d(e)||a(e)},d=function(e){var t,n,r,i,o,a;for(n=0,r=(i=e.children).length;n<r;n++)return"img"===(o=null!=(a=(t=i[n]).tagName)?a.toLowerCase():void 0)||"video"===o||"canvas"===o||"embed"===o||"object"===o||"iframe"===o||d(t);return!1},a=function(e){var t,n,r,i;for(n=0,r=(i=e.children).length;n<r;n++)return t=i[n],"inline"!==getComputedStyle(t).display||a(t);return!1},c=function(e){var t;return t=getComputedStyle(e).backgroundColor,e===document.documentElement&&k(t)?"rgb(255, 255, 255)":t},g=function(e){return getComputedStyle(e).color},L=document.createElement("style"),l=function(e,t){var n;return null==t&&(t=0),!(n=e.parentNode)||n===document||n===e?t:(n.hasAttribute(o)&&(t+=1),t+l(n))},E=function(e){var t,n,r;for(n in r=[],e)(t=e[n]).depth=l(t.container),r.push(t);return r.sort((function(e,t){return e.depth<t.depth?-1:e.depth>t.depth?1:0})),r},w=function(e){var t,n,r,i;for(t=0,n=(r=["textDecorationLine","textDecoration"]).length;t<n;t++)if(null!=(i=e[r[t]])?i.match(/\bunderline\b/):void 0)return!0;return!1},v=function(e){var t,n,r,i,a;return a=getComputedStyle(e),r=parseFloat(a.fontSize),!!(w(a)&&"inline"===a.display&&r>=10&&!h(e)&&(n=s(e))&&(t=p(e)))&&(e.setAttribute(x,g(e)),e.setAttribute("data-smart-underline-link-background-position",t),(i=n.getAttribute(o))?S[i].links.push(e):(i=T(),n.setAttribute(o,i),S[i]={id:i,container:n,links:[e]}),!0)},A=function(){var e,t,n,r,i,a,d,l,u,m,s,f,h,b,v;for(v="",s={},a=0,l=(i=E(S)).length;a<l;a++){for(f={},d=0,u=(b=(r=i[a]).links).length;d<u;d++)m=b[d],f[g(m)]=!0,s[p(m)]=!0;for(n in e=c(r.container),f)v+=(h=function(e){return null==e&&(e=""),"["+o+'="'+r.id+'"] a['+x+'="'+n+'"][data-smart-underline-link-always]'+e+",\n["+o+'="'+r.id+'"] a['+x+'="'+n+'"]['+C+"]"+e+":hover"})()+", "+h(":visited")+" {\n  color: "+n+";\n  text-decoration: none !important;\n  text-shadow: 0.03em 0 "+e+", -0.03em 0 "+e+", 0 0.03em "+e+", 0 -0.03em "+e+", 0.06em 0 "+e+", -0.06em 0 "+e+", 0.09em 0 "+e+", -0.09em 0 "+e+", 0.12em 0 "+e+", -0.12em 0 "+e+", 0.15em 0 "+e+", -0.15em 0 "+e+";\n  background-color: transparent;\n  background-image: -webkit-linear-gradient("+e+", "+e+"), -webkit-linear-gradient("+e+", "+e+"), -webkit-linear-gradient("+n+", "+n+");\n  background-image: -moz-linear-gradient("+e+", "+e+"), -moz-linear-gradient("+e+", "+e+"), -moz-linear-gradient("+n+", "+n+");\n  background-image: -o-linear-gradient("+e+", "+e+"), -o-linear-gradient("+e+", "+e+"), -o-linear-gradient("+n+", "+n+");\n  background-image: -ms-linear-gradient("+e+", "+e+"), -ms-linear-gradient("+e+", "+e+"), -ms-linear-gradient("+n+", "+n+");\n  background-image: linear-gradient("+e+", "+e+"), linear-gradient("+e+", "+e+"), linear-gradient("+n+", "+n+");\n  -webkit-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  -moz-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  background-repeat: no-repeat, no-repeat, repeat-x;\n}\n\n"+h("::selection")+" {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\n\n"+h("::-moz-selection")+" {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}"}for(t in s)v+='a[data-smart-underline-link-background-position="'+t+'"] {\n  background-position: 0% '+t+"%, 100% "+t+"%, 0% "+t+"%;\n}";return L.innerHTML=v},y=function(){if(this,!this.hasAttribute(C)&&v(this))return this.setAttribute(C,""),A()},b=function(e){var t,n,r,i,o;if(o=M(),(i=document.querySelectorAll((e.location?e.location+" ":"")+"a")).length){for(S={},t=0,n=i.length;t<n;t++)r=i[t],v(r)?r.setAttribute("data-smart-underline-link-always",""):(r.removeEventListener("mouseover",y),r.addEventListener("mouseover",y));return A(),document.body.appendChild(L),z.push(M()-o)}},u=function(){var e,t,n,r,i,a;for(null!=(r=L.parentNode)&&r.removeChild(L),Array.prototype.forEach.call(document.querySelectorAll("["+C+"]"),(function(e){return e.removeEventListener(y)})),a=[],t=0,n=(i=[x,"data-smart-underline-link-small","data-smart-underline-link-large","data-smart-underline-link-always",C,o]).length;t<n;t++)e=i[t],a.push(Array.prototype.forEach.call(document.querySelectorAll("["+e+"]"),(function(t){return t.removeAttribute(e)})));return a},window.SmartUnderline={init:function(e){return null==e&&(e={}),"loading"===document.readyState?(window.addEventListener("DOMContentLoaded",(function(){return b(e)})),window.addEventListener("load",(function(){return u(),b(e)}))):(u(),b(e))},destroy:function(){return u()},performanceTimes:function(){return z}})}).call(this);